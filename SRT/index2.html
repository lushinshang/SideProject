
<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>exam36 VTT å­—å¹•æ ¡æ­£å·¥å…· - C4 æ¶æ§‹åœ–</title>
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      min-height: 100vh;
      padding: 40px 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.98);
      border-radius: 16px;
      box-shadow: 0 25px 80px rgba(0, 0, 0, 0.4);
      overflow: hidden;
    }

    header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 50px 40px;
      text-align: center;
    }

    header h1 {
      font-size: 2.5em;
      margin-bottom: 15px;
    }

    header p {
      font-size: 1.2em;
      opacity: 0.95;
    }

    .c4-badge {
      display: inline-block;
      background: rgba(255, 255, 255, 0.2);
      padding: 8px 20px;
      border-radius: 20px;
      margin-top: 15px;
    }

    .toc {
      background: #f8f9fa;
      padding: 25px 40px;
      border-bottom: 1px solid #e0e0e0;
    }

    .toc h3 {
      color: #667eea;
      margin-bottom: 15px;
    }

    .toc ul {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      list-style: none;
    }

    .toc a {
      color: #667eea;
      text-decoration: none;
      padding: 8px 16px;
      background: white;
      border-radius: 20px;
      border: 1px solid #667eea;
      transition: all 0.3s;
    }

    .toc a:hover {
      background: #667eea;
      color: white;
    }

    .content {
      padding: 40px;
    }

    .section {
      margin-bottom: 60px;
      padding-bottom: 40px;
      border-bottom: 2px solid #f0f0f0;
    }

    .section:last-child {
      border-bottom: none;
    }

    .section-title {
      font-size: 1.8em;
      color: #1a1a2e;
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 3px solid #667eea;
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .section-title .c4-level {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 0.6em;
    }

    .mermaid {
      display: flex;
      justify-content: center;
      background: #f8f9fa;
      padding: 30px;
      border-radius: 12px;
      margin: 25px 0;
      overflow-x: auto;
      border: 1px solid #e0e0e0;
    }

    .description-box {
      background: linear-gradient(135deg, #f0f4ff 0%, #fff 100%);
      border-left: 5px solid #667eea;
      padding: 25px;
      border-radius: 0 12px 12px 0;
      margin: 20px 0;
    }

    .description-box h3 {
      color: #667eea;
      margin-bottom: 15px;
    }

    .description-box p {
      color: #444;
      line-height: 1.8;
      margin-bottom: 10px;
    }

    .description-box ul {
      color: #444;
      line-height: 1.8;
      margin-left: 20px;
      margin-top: 10px;
    }

    .description-box li {
      margin-bottom: 8px;
    }

    .diagram-explanation {
      background: #fff8e1;
      border-left: 5px solid #ff9800;
      padding: 20px 25px;
      border-radius: 0 12px 12px 0;
      margin: 20px 0;
    }

    .diagram-explanation h4 {
      color: #e65100;
      margin-bottom: 12px;
      font-size: 1.1em;
    }

    .diagram-explanation p {
      color: #555;
      line-height: 1.7;
      margin-bottom: 8px;
    }

    .diagram-explanation ul {
      color: #555;
      margin-left: 20px;
      line-height: 1.7;
    }

    .component-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin: 25px 0;
    }

    .component-card {
      background: white;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      padding: 20px;
      transition: all 0.3s ease;
      border-top: 4px solid #667eea;
    }

    .component-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.15);
    }

    .component-card h4 {
      color: #1a1a2e;
      margin-bottom: 10px;
    }

    .component-card p {
      color: #666;
      line-height: 1.6;
      font-size: 0.95em;
    }

    .tech-tag {
      display: inline-block;
      background: #f0f4ff;
      color: #667eea;
      padding: 3px 10px;
      border-radius: 15px;
      font-size: 0.8em;
      margin-top: 10px;
      margin-right: 5px;
    }

    .data-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      margin: 20px 0;
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 3px 15px rgba(0, 0, 0, 0.05);
    }

    .data-table th {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 14px 18px;
      text-align: left;
    }

    .data-table td {
      padding: 12px 18px;
      border-bottom: 1px solid #f0f0f0;
      color: #444;
    }

    .data-table tr:hover td {
      background: #f8f9fa;
    }

    .code-block {
      background: #1a1a2e;
      color: #f8f8f2;
      padding: 20px;
      border-radius: 10px;
      font-family: 'Courier New', monospace;
      font-size: 0.9em;
      overflow-x: auto;
      margin: 20px 0;
      line-height: 1.6;
    }

    .code-block .comment {
      color: #6272a4;
    }

    .code-block .class {
      color: #50fa7b;
    }

    .legend-box {
      background: #e8f5e9;
      border: 1px solid #81c784;
      border-radius: 12px;
      padding: 20px;
      margin: 20px 0;
    }

    .legend-box h4 {
      color: #2e7d32;
      margin-bottom: 12px;
    }

    .legend-items {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .legend-color {
      width: 20px;
      height: 20px;
      border-radius: 4px;
    }

    .footer {
      background: #1a1a2e;
      padding: 25px;
      text-align: center;
      color: rgba(255, 255, 255, 0.7);
    }

    @media (max-width: 768px) {
      header h1 {
        font-size: 1.8em;
      }

      .content {
        padding: 20px;
      }

      .component-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <header>
      <h1>ğŸ¬ exam36 VTT å­—å¹•æ ¡æ­£å·¥å…·</h1>
      <p>C4 Model è»Ÿé«”æ¶æ§‹åœ–</p>
      <div class="c4-badge">ğŸ“ Context â†’ Container â†’ Component â†’ Code</div>
    </header>

    <nav class="toc">
      <h3>ğŸ“‘ å¿«é€Ÿå°è¦½</h3>
      <ul>
        <li><a href="#c1">ğŸŒ C1: Context</a></li>
        <li><a href="#c2">ğŸ“¦ C2: Container</a></li>
        <li><a href="#c3">âš™ï¸ C3: Component</a></li>
        <li><a href="#c4">ğŸ’» C4: Code</a></li>
        <li><a href="#dataflow">ğŸ”„ è³‡æ–™æµ</a></li>
      </ul>
    </nav>

    <div class="content">

      <!-- C1: System Context -->
      <div id="c1" class="section">
        <h2 class="section-title">
          ğŸŒ ç³»çµ±ä¸Šä¸‹æ–‡åœ–
          <span class="c4-level">C1 Level</span>
        </h2>

        <div class="description-box">
          <h3>ğŸ“‹ æ¦‚è¿°</h3>
          <p><strong>C1 Level (System Context)</strong> æ˜¯ C4 æ¨¡å‹çš„æœ€é«˜å±¤ç´šï¼Œå±•ç¤ºç³»çµ±èˆ‡å¤–éƒ¨ä¸–ç•Œçš„äº’å‹•é—œä¿‚ã€‚
            æ­¤åœ–è‘—é‡æ–¼ã€Œèª°æœƒä½¿ç”¨é€™å€‹ç³»çµ±ã€ä»¥åŠã€Œç³»çµ±ä¾è³´å“ªäº›å¤–éƒ¨æœå‹™ã€ã€‚</p>
          <p>exam36 VTT å­—å¹•æ ¡æ­£å·¥å…·æ˜¯ä¸€å€‹æ•´åˆ AI é©…å‹•çš„å­—å¹•æ ¡æ­£ç³»çµ±ï¼š</p>
          <ul>
            <li><strong>ä½¿ç”¨è€…</strong>ï¼šå½±ç‰‡è£½ä½œè€…é€éå‘½ä»¤åˆ—ä»‹é¢ (CLI) æäº¤ VTT å­—å¹•æª”æ¡ˆ</li>
            <li><strong>AI æœå‹™</strong>ï¼šç³»çµ±å‘¼å« Google Gemini API é€²è¡Œæ™ºèƒ½æ ¡æ­£ï¼Œä¸¦å‚™æœ‰ Copilot CLI ä½œç‚ºå‚™é¸</li>
            <li><strong>æª”æ¡ˆç³»çµ±</strong>ï¼šè®€å–åŸå§‹å­—å¹•ã€è¼¸å‡ºæ ¡æ­£çµæœèˆ‡ç›¸é—œå…ƒè³‡æ–™</li>
          </ul>
        </div>

        <div class="mermaid">
          graph TB
          subgraph Users[External Users]
          User[User - Video Creator]
          end

          subgraph System[exam36 VTT Correction Tool]
          Main[AI-Powered Subtitle Correction System]
          end

          subgraph External[External Systems]
          Gemini[Google Gemini API]
          Copilot[GitHub Copilot CLI]
          FS[File System]
          end

          User -->|Submit VTT| Main
          Main -->|Return Results| User
          Main -->|AI Requests| Gemini
          Main -->|Fallback AI| Copilot
          Main -->|Read/Write Files| FS

          style User fill:#08427b,color:#fff
          style Main fill:#1168bd,color:#fff
          style Gemini fill:#999,color:#fff
          style Copilot fill:#999,color:#fff
          style FS fill:#999,color:#fff
        </div>

        <div class="diagram-explanation">
          <h4>ğŸ” åœ–è¡¨èªªæ˜</h4>
          <ul>
            <li><strong>è—è‰²æ·±è‰² (User)</strong>ï¼šå¤–éƒ¨ä½¿ç”¨è€…/è§’è‰² - å½±ç‰‡è£½ä½œè€…æˆ–å…§å®¹å‰µä½œè€…</li>
            <li><strong>è—è‰²ä¸­ç­‰ (System)</strong>ï¼šæ ¸å¿ƒç³»çµ± - exam36 VTT å­—å¹•æ ¡æ­£å·¥å…·</li>
            <li><strong>ç°è‰² (External)</strong>ï¼šå¤–éƒ¨ç³»çµ± - Gemini APIã€Copilot CLIã€æª”æ¡ˆç³»çµ±</li>
            <li><strong>ç®­é ­</strong>ï¼šè¡¨ç¤ºè³‡æ–™æµå‘èˆ‡ç³»çµ±é–“çš„äº’å‹•é—œä¿‚</li>
          </ul>
        </div>

        <div class="component-grid">
          <div class="component-card">
            <h4>ğŸ‘¤ ä½¿ç”¨è€… (User)</h4>
            <p>éœ€è¦æ ¡æ­£è‡ªå‹•ç”¢ç”Ÿå­—å¹•çš„å½±ç‰‡è£½ä½œè€…ï¼Œé€šå¸¸ä½¿ç”¨ Whisper ç­‰ ASR å·¥å…·ç”¢ç”Ÿçš„ VTT æª”æ¡ˆä½œç‚ºè¼¸å…¥ã€‚</p>
            <span class="tech-tag">CLI æ“ä½œ</span>
            <span class="tech-tag">VTT/SRT æª”æ¡ˆ</span>
          </div>
          <div class="component-card">
            <h4>ğŸ¤– Gemini API</h4>
            <p>Google çš„å¤§å‹èªè¨€æ¨¡å‹æœå‹™ï¼Œæä¾›æ–‡æœ¬åˆ†æã€è¡“èªæå–ã€éŒ¯å­—æ ¡æ­£ç­‰ AI èƒ½åŠ›ã€‚æ”¯æ´ Thinking Mode é€²è¡Œæ·±åº¦æ¨ç†ã€‚</p>
            <span class="tech-tag">gemini-2.5-flash-lite</span>
            <span class="tech-tag">Thinking Mode</span>
          </div>
          <div class="component-card">
            <h4>ğŸ”„ Copilot CLI</h4>
            <p>GitHub Copilot å‘½ä»¤åˆ—å·¥å…·ï¼Œä½œç‚º Gemini é…é¡ç”¨ç›¡æˆ– API ä¸å¯ç”¨æ™‚çš„å‚™é¸ AI æœå‹™ã€‚</p>
            <span class="tech-tag">gpt-4.1</span>
            <span class="tech-tag">é›¶æˆæœ¬å‚™é¸</span>
          </div>
        </div>
      </div>

      <!-- C2: Container Diagram -->
      <div id="c2" class="section">
        <h2 class="section-title">
          ğŸ“¦ å®¹å™¨æ¶æ§‹åœ–
          <span class="c4-level">C2 Level</span>
        </h2>

        <div class="description-box">
          <h3>ğŸ“‹ ç³»çµ±å®¹å™¨</h3>
          <p><strong>C2 Level (Container Diagram)</strong> æ·±å…¥ç³»çµ±å…§éƒ¨ï¼Œå±•ç¤ºä¸»è¦çš„ã€Œå®¹å™¨ã€- å¯ç¨ç«‹éƒ¨ç½²çš„æ‡‰ç”¨ç¨‹å¼æˆ–æœå‹™ã€‚
            æ¯å€‹å®¹å™¨ä»£è¡¨ä¸€å€‹ç¨ç«‹çš„ Python æ¨¡çµ„ï¼Œè² è²¬ç‰¹å®šè·è²¬ã€‚</p>
          <p>ç³»çµ±ç”±ä»¥ä¸‹æ ¸å¿ƒå®¹å™¨çµ„æˆï¼š</p>
          <ul>
            <li><strong>CLI æ‡‰ç”¨ç¨‹å¼</strong>ï¼šå‘½ä»¤åˆ—å…¥å£é»ï¼Œè™•ç†åƒæ•¸è§£æèˆ‡æµç¨‹æ§åˆ¶</li>
            <li><strong>VTT è§£æå™¨</strong>ï¼šè² è²¬ W3C WebVTT æ ¼å¼çš„è§£æã€é©—è­‰èˆ‡è½‰æ›</li>
            <li><strong>7 æ­¥é©Ÿæ ¡æ­£å¼•æ“</strong>ï¼šæ ¸å¿ƒæ ¡æ­£é‚è¼¯ï¼Œå¯¦ç¾å®Œæ•´çš„æ™ºèƒ½æ ¡æ­£æµç¨‹</li>
            <li><strong>Ralph Loop å¼•æ“</strong>ï¼šè¿­ä»£æ”¹é€²æ©Ÿåˆ¶ï¼Œç¢ºä¿é”æˆ 95%+ å“è³ªç›®æ¨™</li>
            <li><strong>AI å®¢æˆ¶ç«¯å±¤</strong>ï¼šå°è£ AI æœå‹™å‘¼å«ï¼Œå¯¦ç¾é‡è©¦èˆ‡å‚™é¸åˆ‡æ›</li>
          </ul>
        </div>

        <div class="mermaid">
          graph TB
          User[User]

          subgraph exam36[exam36 System]
          CLI[CLI - main.py]
          Parser[VTT Parser]
          Corrector[7-Step Corrector]
          Ralph[Ralph Loop Engine]
          AI[AI Layer]
          end

          Gemini[Gemini API]
          Copilot[Copilot CLI]
          FS[File System]

          User --> CLI
          CLI --> Parser
          CLI --> Corrector
          CLI --> Ralph
          Corrector --> Parser
          Corrector --> AI
          Ralph --> Corrector
          AI --> Gemini
          AI --> Copilot
          Parser --> FS

          style User fill:#08427b,color:#fff
          style CLI fill:#438dd5,color:#fff
          style Parser fill:#438dd5,color:#fff
          style Corrector fill:#438dd5,color:#fff
          style Ralph fill:#438dd5,color:#fff
          style AI fill:#438dd5,color:#fff
          style Gemini fill:#999,color:#fff
          style Copilot fill:#999,color:#fff
          style FS fill:#999,color:#fff
        </div>

        <div class="diagram-explanation">
          <h4>ğŸ” åœ–è¡¨èªªæ˜</h4>
          <ul>
            <li><strong>CLI â†’ Parser/Corrector/Ralph</strong>ï¼šCLI æ ¹æ“šåƒæ•¸æ±ºå®šèª¿ç”¨å–®æ¬¡æ ¡æ­£æˆ– Ralph Loop è¿­ä»£æ¨¡å¼</li>
            <li><strong>Corrector â†’ Parser</strong>ï¼šæ ¡æ­£å¼•æ“ä½¿ç”¨è§£æå™¨è®€å–å’Œè¼¸å‡º VTT æª”æ¡ˆ</li>
            <li><strong>Corrector â†’ AI</strong>ï¼šæ ¡æ­£å¼•æ“é€é AI å±¤é€²è¡Œæ™ºèƒ½åˆ†æèˆ‡æ ¡æ­£</li>
            <li><strong>Ralph â†’ Corrector</strong>ï¼šRalph Loop åè¦†èª¿ç”¨æ ¡æ­£å¼•æ“ç›´åˆ°å“è³ªé”æ¨™</li>
            <li><strong>AI â†’ Gemini/Copilot</strong>ï¼šAI å±¤å„ªå…ˆä½¿ç”¨ Geminiï¼Œå¤±æ•—æ™‚åˆ‡æ›è‡³ Copilot</li>
          </ul>
        </div>

        <table class="data-table">
          <thead>
            <tr>
              <th>å®¹å™¨</th>
              <th>æª”æ¡ˆ</th>
              <th>æŠ€è¡“</th>
              <th>è·è²¬</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>CLI</strong></td>
              <td>main.py</td>
              <td>Python + argparse</td>
              <td>å‘½ä»¤åˆ—è§£æã€æ—¥èªŒè¨­ç½®ã€æµç¨‹è·¯ç”±</td>
            </tr>
            <tr>
              <td><strong>VTT Parser</strong></td>
              <td>vtt_parser.py</td>
              <td>Python dataclass</td>
              <td>VTT è§£æã€é©—è­‰ã€VTTâ†”SRT è½‰æ›</td>
            </tr>
            <tr>
              <td><strong>7-Step Corrector</strong></td>
              <td>vtt_corrector.py</td>
              <td>Python + AI æ•´åˆ</td>
              <td>ä¸»é¡Œåµæ¸¬ã€è¡“èªæå–ã€æ‰¹æ¬¡æ ¡æ­£ã€æ‘˜è¦ç”Ÿæˆ</td>
            </tr>
            <tr>
              <td><strong>Ralph Loop</strong></td>
              <td>ralph_loop_engine.py</td>
              <td>Python + ç‹€æ…‹æŒä¹…åŒ–</td>
              <td>è¿­ä»£åŸ·è¡Œã€å“è³ªè©•ä¼°ã€æ”¶æ–‚åˆ¤å®š</td>
            </tr>
            <tr>
              <td><strong>AI Layer</strong></td>
              <td>gemini_client.py<br>ai_fallback_manager.py</td>
              <td>google-genai SDK</td>
              <td>API å‘¼å«ã€é‡è©¦æ©Ÿåˆ¶ã€Key è¼ªæ›¿ã€å‚™é¸åˆ‡æ›</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- C3: Component Diagram -->
      <div id="c3" class="section">
        <h2 class="section-title">
          âš™ï¸ å…ƒä»¶ç´°ç¯€åœ–
          <span class="c4-level">C3 Level</span>
        </h2>

        <div class="description-box">
          <h3>ğŸ“‹ 7 æ­¥é©Ÿæ ¡æ­£æµç¨‹</h3>
          <p><strong>C3 Level (Component Diagram)</strong> å±•ç¤ºå®¹å™¨å…§éƒ¨çš„ã€Œå…ƒä»¶ã€- å…·é«”çš„é¡åˆ¥ã€å‡½æ•¸æˆ–æ¨¡çµ„ã€‚
            æ­¤åœ–è©³ç´°èªªæ˜æ ¡æ­£å¼•æ“çš„ 7 æ­¥é©Ÿæµç¨‹ï¼Œé€™æ˜¯ç³»çµ±çš„æ ¸å¿ƒè™•ç†é‚è¼¯ã€‚</p>
          <p>æ ¡æ­£æµç¨‹çš„è¨­è¨ˆç†å¿µï¼š</p>
          <ul>
            <li><strong>Step 1-3</strong>ï¼šç†è§£éšæ®µ - è§£ææª”æ¡ˆã€åµæ¸¬ä¸»é¡Œã€æå–è¡“èª</li>
            <li><strong>Step 3.5</strong>ï¼šå›é¥‹å„ªåŒ– - æ ¹æ“šè¡“èªé‡æ–°èª¿æ•´ä¸»é¡Œåˆ¤å®š</li>
            <li><strong>Step 4-5</strong>ï¼šæ ¡æ­£éšæ®µ - å»ºç«‹ç¸®å¯«å°ç…§ã€æ‰¹æ¬¡æ ¡æ­£å­—å¹•</li>
            <li><strong>Step 6-7</strong>ï¼šè¼¸å‡ºéšæ®µ - ç”Ÿæˆæ ¡æ­£çµæœã€æ‘˜è¦èˆ‡ç« ç¯€</li>
          </ul>
        </div>

        <div class="mermaid">
          graph TD
          Input[input.vtt]
          S1[Step 1: Parse VTT]
          S2[Step 2: Detect Topic]
          S3[Step 3: Extract Terms]
          S35[Step 3.5: Refine Topic]
          S4[Step 4: Map Abbreviations]
          S5[Step 5: Batch Correct]
          S6[Step 6: Generate Outputs]
          S7[Step 7: Summary]
          Output[corrected.vtt]

          Input --> S1 --> S2 --> S3 --> S35 --> S4 --> S5 --> S6 --> S7 --> Output

          style S1 fill:#4CAF50,color:#fff
          style S2 fill:#2196F3,color:#fff
          style S3 fill:#9C27B0,color:#fff
          style S35 fill:#E91E63,color:#fff
          style S4 fill:#FF9800,color:#fff
          style S5 fill:#f44336,color:#fff
          style S6 fill:#00BCD4,color:#fff
          style S7 fill:#607D8B,color:#fff
        </div>

        <div class="diagram-explanation">
          <h4>ğŸ” å„æ­¥é©Ÿèªªæ˜</h4>
          <ul>
            <li><strong style="color:#4CAF50">Step 1 (ç¶ )</strong>ï¼šè§£æ VTT æª”æ¡ˆçµæ§‹ï¼Œæå–æ™‚é–“è»¸èˆ‡æ–‡å­—å…§å®¹</li>
            <li><strong style="color:#2196F3">Step 2 (è—)</strong>ï¼šä½¿ç”¨æ™ºèƒ½æ¡æ¨£åˆ†æå­—å¹•å…§å®¹ï¼Œåˆ¤æ–·å½±ç‰‡ä¸»é¡Œé ˜åŸŸ</li>
            <li><strong style="color:#9C27B0">Step 3 (ç´«)</strong>ï¼šæ ¹æ“šä¸»é¡Œæå–å°ˆæ¥­è¡“èªè¡¨ï¼Œå»ºç«‹é ˜åŸŸçŸ¥è­˜åº«</li>
            <li><strong style="color:#E91E63">Step 3.5 (ç²‰)</strong>ï¼šğŸ†• æ ¹æ“šè¡“èªå›é¥‹å„ªåŒ–ä¸»é¡Œåˆ¤å®šï¼ˆPhase 3 æ–°å¢ï¼‰</li>
            <li><strong style="color:#FF9800">Step 4 (æ©™)</strong>ï¼šå»ºç«‹ç¸®å¯«èˆ‡å…¨ç¨±çš„å°ç…§è¡¨</li>
            <li><strong style="color:#f44336">Step 5 (ç´…)</strong>ï¼šâ­ æ ¸å¿ƒæ­¥é©Ÿ - æ‰¹æ¬¡æ ¡æ­£æ‰€æœ‰å­—å¹•ï¼Œä¿®æ­£éŒ¯å­—èˆ‡æ¨™é»</li>
            <li><strong style="color:#00BCD4">Step 6 (é’)</strong>ï¼šç”Ÿæˆ VTT/SRT è¼¸å‡ºæª”æ¡ˆèˆ‡ä¿®æ­£è¨˜éŒ„</li>
            <li><strong style="color:#607D8B">Step 7 (ç°)</strong>ï¼šç”Ÿæˆå½±ç‰‡æ‘˜è¦èˆ‡ YouTube ç« ç¯€æ¨™è¨˜</li>
          </ul>
        </div>

        <h3 style="margin: 40px 0 20px;">ğŸ”„ Ralph Loop è¿­ä»£æ©Ÿåˆ¶</h3>

        <div class="description-box">
          <h3>ğŸ“‹ è¿­ä»£æ”¹é€²å¼•æ“</h3>
          <p><strong>Ralph Loop</strong> æ˜¯ä¸€å€‹æ™ºèƒ½è¿­ä»£æ©Ÿåˆ¶ï¼Œæœƒåè¦†åŸ·è¡Œæ ¡æ­£æµç¨‹ç›´åˆ°é”æˆå“è³ªç›®æ¨™ã€‚
            è¨­è¨ˆç›®æ¨™æ˜¯é”æˆ 95%+ çš„æ ¡æ­£å“è³ªï¼Œç¢ºä¿å­—å¹•è¼¸å‡ºå“è³ªä¸€è‡´ã€‚</p>
        </div>

        <div class="mermaid">
          graph LR
          Run[run - Main Loop]
          Eval[evaluate_quality]
          Check[check_completion]
          Save[save_state]
          Done[Final Result]

          Run --> Eval --> Check
          Check -->|Continue| Save --> Run
          Check -->|Complete| Done

          style Run fill:#E91E63,color:#fff
          style Eval fill:#9C27B0,color:#fff
          style Check fill:#FF9800,color:#fff
          style Save fill:#4CAF50,color:#fff
        </div>

        <div class="diagram-explanation">
          <h4>ğŸ” è¿­ä»£æµç¨‹èªªæ˜</h4>
          <ul>
            <li><strong style="color:#E91E63">run()</strong>ï¼šä¸»è¿­ä»£è¿´åœˆï¼Œæ§åˆ¶æ•´é«”æµç¨‹</li>
            <li><strong style="color:#9C27B0">evaluate_quality()</strong>ï¼šä½¿ç”¨ 4 é …åŠ æ¬ŠæŒ‡æ¨™è¨ˆç®—å“è³ªåˆ†æ•¸</li>
            <li><strong style="color:#FF9800">check_completion()</strong>ï¼šåˆ¤æ–·æ˜¯å¦é”æˆå®Œæˆæ¢ä»¶</li>
            <li><strong style="color:#4CAF50">save_state()</strong>ï¼šæŒä¹…åŒ–è¿­ä»£ç‹€æ…‹ï¼Œæ”¯æ´ä¸­æ–·çºŒè·‘</li>
          </ul>
        </div>

        <div class="component-grid">
          <div class="component-card">
            <h4>ğŸ“Š å“è³ªè©•ä¼°æŒ‡æ¨™</h4>
            <p>
              <strong>éŒ¯èª¤å¯†åº¦ 40%</strong>ï¼š1.0 - (æœ‰æ•ˆä¿®æ­£æ•¸ / cue ç¸½æ•¸)<br>
              <strong>æ¨™é»æ­£ç¢ºæ€§ 20%</strong>ï¼šæ­£ç¢ºçµå°¾æ¨™é»çš„ cue æ¯”ä¾‹<br>
              <strong>è¡“èªä¸€è‡´æ€§ 30%</strong>ï¼šè¡“èªæ­£ç¢ºä½¿ç”¨çš„æ¯”ä¾‹<br>
              <strong>èªæ„é€£è²«æ€§ 10%</strong>ï¼šå‰å¾Œæ–‡èªæ„é€£è²«è©•åˆ†
            </p>
          </div>
          <div class="component-card">
            <h4>ğŸ¯ å®Œæˆæ¢ä»¶</h4>
            <p>
              âœ… å“è³ª â‰¥ 95%ï¼ˆä¸»è¦ç›®æ¨™ï¼‰<br>
              âœ… å“è³ª â‰¥ 90% ä¸”ç‚ºç¬¬ 2 è¼ªä»¥ä¸Šï¼ˆæ”¶æ–‚ï¼‰<br>
              âœ… é€£çºŒ 3 æ¬¡æ”¹å–„ &lt;1%ï¼ˆåœæ»¯ï¼‰<br>
              âœ… é”åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•¸ï¼ˆé è¨­ 5 æ¬¡ï¼‰
            </p>
          </div>
        </div>
      </div>

      <!-- C4: Code Diagram -->
      <div id="c4" class="section">
        <h2 class="section-title">
          ğŸ’» ç¨‹å¼ç¢¼çµæ§‹
          <span class="c4-level">C4 Level</span>
        </h2>

        <div class="description-box">
          <h3>ğŸ“‹ å°ˆæ¡ˆçµæ§‹</h3>
          <p><strong>C4 Level (Code Diagram)</strong> å±•ç¤ºæœ€ç´°ç¯€çš„å±¤ç´š - å¯¦éš›çš„ç¨‹å¼ç¢¼çµæ§‹èˆ‡é¡åˆ¥é—œä¿‚ã€‚
            æ‰€æœ‰æ ¸å¿ƒç¨‹å¼ç¢¼ä½æ–¼ <code>src/</code> ç›®éŒ„ï¼Œéµå¾ª Python æ¨¡çµ„åŒ–è¨­è¨ˆåŸå‰‡ã€‚</p>
        </div>

        <div class="code-block">
          <span class="comment"># å°ˆæ¡ˆç›®éŒ„çµæ§‹</span>
          exam36_æ ¡æ­£å­—å¹•/
          â”œâ”€â”€ src/
          â”‚ â”œâ”€â”€ <span class="class">main.py</span> <span class="comment"># CLI å…¥å£é» (410 è¡Œ)</span>
          â”‚ â”œâ”€â”€ <span class="class">vtt_parser.py</span> <span class="comment"># VTT è§£æå™¨ (534 è¡Œ)</span>
          â”‚ â”œâ”€â”€ <span class="class">vtt_corrector.py</span> <span class="comment"># 7 æ­¥é©Ÿæ ¡æ­£å¼•æ“ (1067 è¡Œ)</span>
          â”‚ â”œâ”€â”€ <span class="class">ralph_loop_engine.py</span> <span class="comment"># Ralph Loop å¼•æ“ (537 è¡Œ)</span>
          â”‚ â”œâ”€â”€ <span class="class">gemini_client.py</span> <span class="comment"># Gemini API å®¢æˆ¶ç«¯ (441 è¡Œ)</span>
          â”‚ â”œâ”€â”€ <span class="class">ai_fallback_manager.py</span> <span class="comment"># AI å‚™é¸ç®¡ç† (479 è¡Œ)</span>
          â”‚ â”œâ”€â”€ <span class="class">copilot_cli_client.py</span> <span class="comment"># Copilot CLI å°è£</span>
          â”‚ â”œâ”€â”€ <span class="class">config.py</span> <span class="comment"># é…ç½®ç®¡ç†</span>
          â”‚ â”œâ”€â”€ <span class="class">api_keys.py</span> <span class="comment"># API Key è¼ªæ›¿</span>
          â”‚ â””â”€â”€ <span class="class">zh_convert.py</span> <span class="comment"># ç¹ç°¡è½‰æ›</span>
          â”œâ”€â”€ tests/ <span class="comment"># 122+ æ¸¬è©¦æ¡ˆä¾‹</span>
          â”œâ”€â”€ config/prompts/ <span class="comment"># AI æç¤ºè©æ¨¡æ¿</span>
          â”œâ”€â”€ run.sh <span class="comment"># åŸ·è¡Œè…³æœ¬</span>
          â””â”€â”€ requirements.txt <span class="comment"># ç›¸ä¾å¥—ä»¶</span>
        </div>

        <h3 style="margin: 40px 0 20px;">ğŸ”— é¡åˆ¥é—œä¿‚åœ–</h3>

        <div class="description-box">
          <h3>ğŸ“‹ é¡åˆ¥ä¾è³´é—œä¿‚</h3>
          <p>ä¸‹åœ–å±•ç¤ºä¸»è¦é¡åˆ¥ä¹‹é–“çš„ä¾è³´èˆ‡çµ„åˆé—œä¿‚ï¼š</p>
          <ul>
            <li><strong>VTTDocument</strong>ï¼šå­—å¹•æ–‡ä»¶çš„è³‡æ–™çµæ§‹ï¼ŒåŒ…å«å¤šå€‹ VTTCue</li>
            <li><strong>VTTCorrector</strong>ï¼šæ ¸å¿ƒæ ¡æ­£å™¨ï¼Œä¾è³´ GeminiClient é€²è¡Œ AI å‘¼å«</li>
            <li><strong>RalphLoopEngine</strong>ï¼šè¿­ä»£å¼•æ“ï¼ŒæŒæœ‰ VTTCorrector å¯¦ä¾‹</li>
            <li><strong>AIFallbackManager</strong>ï¼šAI å‚™é¸ç®¡ç†ï¼Œå°è£ GeminiClient</li>
          </ul>
        </div>

        <div class="mermaid">
          classDiagram
          class VTTDocument {
          +header
          +cues
          }
          class VTTCorrector {
          +step1_parse_vtt
          +step5_correct_cues_batch
          +correct_vtt_full
          }
          class RalphLoopEngine {
          +run
          }
          class GeminiClient {
          +generate
          }
          class AIFallbackManager {
          +generate
          }

          VTTCorrector --> VTTDocument
          VTTCorrector --> GeminiClient
          RalphLoopEngine --> VTTCorrector
          AIFallbackManager --> GeminiClient
        </div>

        <table class="data-table">
          <thead>
            <tr>
              <th>æ¨¡çµ„</th>
              <th>ä¸»è¦é¡åˆ¥/å‡½æ•¸</th>
              <th>æ¸¬è©¦è¦†è“‹ç‡</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>vtt_parser.py</td>
              <td>VTTDocument, VTTCue, parse_vtt(), vtt_to_srt()</td>
              <td>90%</td>
            </tr>
            <tr>
              <td>vtt_corrector.py</td>
              <td>VTTCorrector (7 å€‹ step æ–¹æ³•)</td>
              <td>77%</td>
            </tr>
            <tr>
              <td>ralph_loop_engine.py</td>
              <td>RalphLoopEngine, IterationRecord</td>
              <td>99%</td>
            </tr>
            <tr>
              <td>main.py</td>
              <td>main(), run_correction(), create_parser()</td>
              <td>71%</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Data Flow -->
      <div id="dataflow" class="section">
        <h2 class="section-title">
          ğŸ”„ è³‡æ–™æµèˆ‡è¼¸å‡º
          <span class="c4-level">Data Flow</span>
        </h2>

        <div class="description-box">
          <h3>ğŸ“‹ è™•ç†ç®¡ç·š</h3>
          <p><strong>Data Flow Diagram</strong> å±•ç¤ºè³‡æ–™å¾è¼¸å…¥åˆ°è¼¸å‡ºçš„å®Œæ•´è½‰æ›æµç¨‹ã€‚
            æ­¤åœ–è£œå…… C4 æ¨¡å‹ï¼Œå¹«åŠ©ç†è§£è³‡æ–™å¦‚ä½•åœ¨ç³»çµ±ä¸­æµå‹•èˆ‡è½‰æ›ã€‚</p>
          <p>è³‡æ–™è™•ç†æµç¨‹ï¼š</p>
          <ul>
            <li><strong>è¼¸å…¥</strong>ï¼šåŸå§‹ VTT å­—å¹•æª”æ¡ˆï¼ˆé€šå¸¸ç”± Whisper ç­‰ ASR å·¥å…·ç”¢ç”Ÿï¼‰</li>
            <li><strong>è™•ç†</strong>ï¼šç¶“éä¸»é¡Œåˆ¤æ–·ã€è¡“èªæå–ã€æ‰¹æ¬¡æ ¡æ­£ç­‰æ­¥é©Ÿ</li>
            <li><strong>è¼¸å‡º</strong>ï¼šæ ¡æ­£å¾Œå­—å¹• + è¡“èªè¡¨ + æ‘˜è¦ + ç« ç¯€æ¨™è¨˜</li>
          </ul>
        </div>

        <div class="mermaid">
          graph LR
          VTT[input.vtt]
          P1[Parse]
          P2[Topic]
          P3[Terms]
          P4[Correct]
          P5[Output]
          OUT1[corrected.vtt]
          OUT2[terminology.json]
          OUT3[summary.txt]

          VTT --> P1 --> P2 --> P3 --> P4 --> P5
          P5 --> OUT1
          P5 --> OUT2
          P5 --> OUT3
        </div>

        <div class="diagram-explanation">
          <h4>ğŸ” è¼¸å‡ºæª”æ¡ˆèªªæ˜</h4>
          <ul>
            <li><strong>corrected.vtt</strong>ï¼šæ ¡æ­£å¾Œçš„å­—å¹•æª”æ¡ˆï¼Œä¿®æ­£éŒ¯å­—èˆ‡æ¨™é»</li>
            <li><strong>terminology.json</strong>ï¼šæå–çš„å°ˆæ¥­è¡“èªå°ç…§è¡¨</li>
            <li><strong>summary.txt</strong>ï¼šå½±ç‰‡å…§å®¹æ‘˜è¦</li>
            <li><strong>chapters.txt</strong>ï¼šYouTube ç« ç¯€æ¨™è¨˜</li>
            <li><strong>corrections.txt</strong>ï¼šä¿®æ­£è¨˜éŒ„æ¸…å–®</li>
          </ul>
        </div>

        <h3 style="margin: 40px 0 20px;">ğŸ“ è¼¸å‡ºç›®éŒ„çµæ§‹</h3>

        <div class="code-block">
          output/
          â”œâ”€â”€ corrected.vtt <span class="comment"># æ ¡æ­£å¾Œå­—å¹• (VTT æ ¼å¼)</span>
          â”œâ”€â”€ corrected.srt <span class="comment"># æ ¡æ­£å¾Œå­—å¹• (SRT æ ¼å¼)</span>
          â”œâ”€â”€ corrections.txt <span class="comment"># ä¿®æ­£è¨˜éŒ„æ¸…å–®</span>
          â”œâ”€â”€ terminology.json <span class="comment"># è¡“èªå°ç…§è¡¨</span>
          â”œâ”€â”€ chapters.txt <span class="comment"># YouTube ç« ç¯€æ¨™è¨˜</span>
          â”œâ”€â”€ summary.txt <span class="comment"># å…§å®¹æ‘˜è¦</span>
          â””â”€â”€ iterations/ <span class="comment"># Ralph Loop è¿­ä»£è¨˜éŒ„ (åƒ… Ralph Loop æ¨¡å¼)</span>
          â”œâ”€â”€ iter_1/
          â”‚ â”œâ”€â”€ corrected.vtt
          â”‚ â”œâ”€â”€ corrections.json
          â”‚ â”œâ”€â”€ metadata.json
          â”‚ â””â”€â”€ quality_score.txt
          â””â”€â”€ iter_2/
          â””â”€â”€ ...
        </div>

        <h3 style="margin: 40px 0 20px;">âš¡ åŸ·è¡Œæ¨¡å¼æ¯”è¼ƒ</h3>

        <div class="component-grid">
          <div class="component-card">
            <h4>â–¶ï¸ å–®æ¬¡æ¨¡å¼ (é è¨­)</h4>
            <p>
              åŸ·è¡Œä¸€æ¬¡å®Œæ•´çš„ 7 æ­¥é©Ÿæµç¨‹ã€‚<br><br>
              <strong>å„ªé»ï¼š</strong>é€Ÿåº¦å¿« (1-2 åˆ†é˜)ã€æˆæœ¬ä½<br>
              <strong>é©ç”¨ï¼š</strong>å¿«é€Ÿé è¦½ã€çŸ­å½±ç‰‡ã€åˆæ­¥æ¸¬è©¦
            </p>
            <span class="tech-tag">./run.sh input.vtt</span>
          </div>
          <div class="component-card">
            <h4>ğŸ” Ralph Loop æ¨¡å¼</h4>
            <p>
              è¿­ä»£åŸ·è¡Œç›´åˆ°é”æˆ 95%+ å“è³ªæˆ–æ”¶æ–‚ã€‚<br><br>
              <strong>å„ªé»ï¼š</strong>é«˜å“è³ªè¼¸å‡ºã€è‡ªå‹•æ”¶æ–‚åˆ¤å®š<br>
              <strong>é©ç”¨ï¼š</strong>æ­£å¼ç™¼å¸ƒã€é•·å½±ç‰‡ã€é«˜å“è³ªéœ€æ±‚
            </p>
            <span class="tech-tag">--enable-ralph-loop</span>
            <span class="tech-tag">--iterations 5</span>
          </div>
        </div>
      </div>

    </div>

    <footer class="footer">
      <p>exam36 VTT å­—å¹•æ ¡æ­£å·¥å…· - C4 æ¶æ§‹æ–‡ä»¶</p>
      <p style="margin-top: 10px; font-size: 0.9em;">Generated: 2026-02-09 | C4 Model: Simon Brown</p>
    </footer>
  </div>

  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: 'default',
      securityLevel: 'loose'
    });
  </script>
</body>

</html>
