
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF2CHT - æ¶æ§‹èˆ‡æµç¨‹åœ–è¡¨</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>
      mermaid.initialize({
        startOnLoad: true,
        theme: 'base',
        themeVariables: {
          primaryColor: '#f0f0f0',
          primaryBorderColor: '#333',
          primaryTextColor: '#000000',
          secondBkgColor: '#e8e8e8',
          secondBorderColor: '#333',
          secondTextColor: '#000000',
          tertiaryColor: '#f5f5f5',
          tertiaryBorderColor: '#333',
          tertiaryTextColor: '#000000',
          noteBkgColor: '#f9f9f9',
          noteBorderColor: '#999',
          noteTextColor: '#000000',
          nodeBkg: '#f0f0f0',
          nodeBorder: '#333',
          edgeLabelBackground: {
            backgroundColor: 'transparent'
          },
          mainFont: 'inherit',
          fontSize: '14px',
          fontFamily: '"Noto Sans TC", "PingFang TC", "Microsoft JhengHei", "Heiti TC", "Segoe UI", sans-serif'
        },
        securityLevel: 'strict'
      });
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans TC', 'PingFang TC', 'Microsoft JhengHei', 'Heiti TC', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .diagram-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .diagram-section:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 50px rgba(0,0,0,0.3);
        }

        .diagram-section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .diagram-section h3 {
            color: #764ba2;
            margin-top: 20px;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .diagram-section p {
            line-height: 1.6;
            margin-bottom: 15px;
            color: #666;
        }

        .mermaid {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }

        /* Ensure mermaid diagrams inherit font and apply text color from node 'color' attribute */
        .mermaid, .mermaid svg {
            font-family: inherit;
        }
        .mermaid svg text {
            fill: currentColor;
            font-family: inherit;
        }
        .mermaid .node, .mermaid .label, .mermaid .edgeLabel {
            color: inherit;
        }

        /* Remove background color from edge labels */
        .mermaid g.edgeLabel rect {
            fill: transparent !important;
            stroke: none !important;
        }
        .mermaid g.edgeLabel text {
            background-color: transparent !important;
        }

        .code-block {
            background: #f5f5f5;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .legend {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .legend-item {
            padding: 10px;
            background: #f9f9f9;
            border-left: 4px solid #667eea;
            border-radius: 4px;
        }

        .legend-item strong {
            color: #764ba2;
        }

        footer {
            text-align: center;
            color: white;
            margin-top: 40px;
            padding: 20px;
            background: rgba(0,0,0,0.2);
            border-radius: 12px;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .diagram-section {
                padding: 20px;
            }

            header h1 {
                font-size: 1.8em;
            }

            .legend {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“ PDF2CHT æ¶æ§‹èˆ‡æµç¨‹åœ–è¡¨</h1>
            <p>å°ˆæ¡ˆæ¶æ§‹ã€æ•¸æ“šæµèˆ‡æ“ä½œå·¥ä½œæµçš„å®Œæ•´å¯è¦–åŒ–</p>
        </header>

        <!-- 1. é …ç›®æ¶æ§‹åœ– -->
        <div class="diagram-section">
            <h2>ğŸ—ï¸ 1. é …ç›®æ¶æ§‹åœ–</h2>
            <p>PDF2CHT çš„æ¨¡çµ„å±¤æ¬¡çµæ§‹ï¼Œå±•ç¤ºä¸åŒçµ„ä»¶é–“çš„ä¾è³´é—œä¿‚ã€‚</p>

            <div class="mermaid">
                %%{init: {'flowchart': {'htmlLabels': true}}}%%
                graph TB
                    CLI["ğŸ–¥ï¸ CLI Layer<br/>ï¼ˆç”¨æˆ¶ç•Œé¢ï¼‰"]
                    PDF["pdf_to_images.py<br/>PDF â†’ Image"]
                    Adaptive["translate_adaptive.py<br/>é©æ‡‰æ€§ç¿»è­¯ï¼ˆå”¯ä¸€æ¨¡å¼ï¼‰"]
                    ImagePDF["images_to_pdf.py<br/>Image â†’ PDF"]
                    Diagnose["diagnose.py<br/>è¨ºæ–·å·¥å…·"]

                    Core["ğŸ”§ Core Layer<br/>ï¼ˆæ ¸å¿ƒå¼•æ“ï¼‰"]
                    PDFConv["pdf_converter.py<br/>PDF â†” Image"]
                    Translator["translator.py<br/>ç¿»è­¯é‚è¼¯"]
                    PromptMgr["prompt_manager.py<br/>æç¤ºè©ç®¡ç†"]
                    GeminiClient["gemini_client.py<br/>API å®¢æˆ¶ç«¯"]

                    Services["âš™ï¸ Services Layer<br/>ï¼ˆæœå‹™å±¤ï¼‰"]
                    RateLimiter["rate_limiter.py<br/>é€Ÿç‡é™åˆ¶"]
                    UsageMonitor["usage_monitor.py<br/>ç”¨é‡ç›£æ§"]
                    ProgressReporter["progress_reporter.py<br/>é€²åº¦å ±å‘Š"]
                    ErrorHandler["error_handler.py<br/>éŒ¯èª¤è™•ç†"]

                    Utils["ğŸ”¨ Utils Layer<br/>ï¼ˆå·¥å…·å±¤ï¼‰"]
                    Config["config.py<br/>é…ç½®ç®¡ç†"]
                    Errors["errors.py<br/>éŒ¯èª¤å®šç¾©"]
                    Logging["logging.py<br/>æ—¥èªŒç³»çµ±"]

                    External["â˜ï¸ External Services<br/>ï¼ˆå¤–éƒ¨æœå‹™ï¼‰"]
                    GeminiAPI["Google Gemini 3<br/>Pro Image API"]
                    SQLite["SQLite Database<br/>usage.db"]

                    CLI --> PDF
                    CLI --> Adaptive
                    CLI --> ImagePDF
                    CLI --> Diagnose

                    PDF --> PDFConv
                    Adaptive --> Core
                    Diagnose --> Core

                    Core --> Translator
                    Core --> PromptMgr
                    Core --> GeminiClient
                    Translator --> Services
                    GeminiClient --> Services

                    Services --> RateLimiter
                    Services --> UsageMonitor
                    Services --> ProgressReporter
                    Services --> ErrorHandler

                    Services --> Utils
                    Utils --> Config
                    Utils --> Errors
                    Utils --> Logging

                    GeminiClient --> GeminiAPI
                    UsageMonitor --> SQLite

                    style CLI fill:#e3f2fd,stroke:#333,stroke-width:2px,color:#000
                    style Core fill:#f3e5f5,stroke:#333,stroke-width:2px,color:#000
                    style Services fill:#fce4ec,stroke:#333,stroke-width:2px,color:#000
                    style Utils fill:#e0f2f1,stroke:#333,stroke-width:2px,color:#000
                    style External fill:#ffe0e0,stroke:#333,stroke-width:2px,color:#000
            </div>

            <h3>ğŸ“Œ å±¤æ¬¡èªªæ˜</h3>
            <div class="legend">
                <div class="legend-item">
                    <strong style="color: #667eea;">CLI Layer</strong><br/>
                    ç”¨æˆ¶ç›´æ¥äº¤äº’çš„å‘½ä»¤è¡Œç•Œé¢ï¼ŒåŒ…å« 4 å€‹ç¨ç«‹ç¨‹å¼ï¼ˆ3 ç¿»è­¯ + 1 è¨ºæ–·ï¼‰
                </div>
                <div class="legend-item">
                    <strong style="color: #764ba2;">Core Layer</strong><br/>
                    ç¿»è­¯æ ¸å¿ƒé‚è¼¯ï¼ŒåŒ…å« PDF è½‰æ›ã€ç¿»è­¯ã€API äº¤äº’
                </div>
                <div class="legend-item">
                    <strong style="color: #f093fb;">Services Layer</strong><br/>
                    æ”¯æ’æœå‹™ï¼ŒåŒ…å«é€Ÿç‡é™åˆ¶ã€ç›£æ§ã€å ±å‘Šã€éŒ¯èª¤è™•ç†
                </div>
                <div class="legend-item">
                    <strong style="color: #4facfe;">Utils Layer</strong><br/>
                    åŸºç¤å·¥å…·ï¼ŒåŒ…å«é…ç½®ã€éŒ¯èª¤å®šç¾©ã€æ—¥èªŒç³»çµ±
                </div>
                <div class="legend-item">
                    <strong style="color: #fa709a;">External</strong><br/>
                    å¤–éƒ¨ä¾è³´ï¼Œå¦‚ Google Gemini API å’Œæœ¬åœ° SQLite è³‡æ–™åº«
                </div>
            </div>
        </div>

        <!-- 2. æ•¸æ“šæµåœ– -->
        <div class="diagram-section">
            <h2>ğŸ”„ 2. å®Œæ•´å·¥ä½œæµç¨‹åœ–</h2>
            <p>å¾ PDF è¼¸å…¥åˆ°ä¸­æ–‡ PDF è¼¸å‡ºçš„å®Œæ•´æ•¸æ“šæµï¼ˆé©æ‡‰æ€§ç¿»è­¯ - å”¯ä¸€æ¨¡å¼ï¼‰ã€‚</p>

            <div class="mermaid">
                %%{init: {'flowchart': {'htmlLabels': true}}}%%
                graph TD
                    Input["ğŸ“¥ è¼¸å…¥ï¼šPDF æ–‡ä»¶<br/>example.pdf"]

                    PDF2Img["ğŸ“‹ æ­¥é©Ÿ 1<br/>PDF â†’ åœ–æª”<br/>(run2.sh)"]

                    ImgDir["ğŸ“ è¼¸å‡ºç›®éŒ„<br/>example/<br/>â”œâ”€ page_001.png<br/>â”œâ”€ page_002.png<br/>â””â”€ ..."]

                    APICheck["âš¡ æ­¥é©Ÿ 2<br/>é©æ‡‰æ€§ç¿»è­¯<br/>(run3.sh)"]

                    PerImageCheck{"æ¯å¼µå‰<br/>æª¢æŸ¥ APIï¼Ÿ"}
                    CalcAspect["ğŸ”¢ è¨ˆç®—å¯¬é«˜æ¯”<br/>æ³¨å…¥æç¤ºè©"]
                    Translate["ğŸŒ ç¿»è­¯<br/>Gemini 3 Pro Image"]
                    TransResult{"æˆåŠŸï¼Ÿ"}
                    Retry["é‡è©¦ 2 æ¬¡<br/>é–“éš” 10 ç§’"]
                    QACheck["âœ… QA ä¿®æ­£<br/>è‡ªå‹•èª¿æ•´å°ºå¯¸"]

                    Output["âœ… ç¿»è­¯å®Œæˆ<br/>cht-example/"]

                    Merge["ğŸ–¼ï¸ æ­¥é©Ÿ 3<br/>åœ–æª” â†’ PDF<br/>(run4.sh)"]

                    FinalOutput["ğŸ“¤ æœ€çµ‚è¼¸å‡º<br/>cht-example.pdf<br/>100% å°ºå¯¸ç²¾ç¢º"]

                    Success["âœ¨ å®Œæˆï¼"]

                    Input --> PDF2Img
                    PDF2Img --> ImgDir
                    ImgDir --> APICheck

                    APICheck --> PerImageCheck
                    PerImageCheck -->|å¯ç”¨| CalcAspect
                    PerImageCheck -->|ä¸å¯ç”¨| Success
                    CalcAspect --> Translate
                    Translate --> TransResult
                    TransResult -->|å¤±æ•—| Retry
                    TransResult -->|æˆåŠŸ| QACheck
                    Retry --> QACheck
                    QACheck --> Output

                    Output --> Merge
                    Merge --> FinalOutput
                    FinalOutput --> Success

                    style Input fill:#e0f2f1,stroke:#333,stroke-width:2px,color:#000
                    style PDF2Img fill:#e3f2fd,stroke:#333,stroke-width:2px,color:#000
                    style ImgDir fill:#f3e5f5,stroke:#333,stroke-width:2px,color:#000
                    style APICheck fill:#e3f2fd,stroke:#333,stroke-width:2px,color:#000
                    style PerImageCheck fill:#fce4ec,stroke:#333,stroke-width:2px,color:#000
                    style CalcAspect fill:#fff3e0,stroke:#333,stroke-width:2px,color:#000
                    style Translate fill:#e3f2fd,stroke:#333,stroke-width:2px,color:#000
                    style TransResult fill:#fce4ec,stroke:#333,stroke-width:2px,color:#000
                    style Retry fill:#e3f2fd,stroke:#333,stroke-width:2px,color:#000
                    style QACheck fill:#fff3e0,stroke:#333,stroke-width:2px,color:#000
                    style Output fill:#f3e5f5,stroke:#333,stroke-width:2px,color:#000
                    style Merge fill:#e3f2fd,stroke:#333,stroke-width:2px,color:#000
                    style FinalOutput fill:#e0f2f1,stroke:#333,stroke-width:2px,color:#000
                    style Success fill:#e8f5e9,stroke:#333,stroke-width:2px,color:#000
            </div>

            <h3>ğŸ”‘ æ¨™æº–å·¥ä½œæµç¨‹</h3>
            <div class="code-block">
# ä½¿ç”¨ä¾¿æ· Shell Scriptsï¼ˆæ¨è–¦ï¼‰
$ ./run1.sh                        # æ¸¬è©¦ API
$ ./run2.sh "example.pdf"          # PDF â†’ åœ–æª”
$ ./run3.sh "example/"             # é©æ‡‰æ€§ç¿»è­¯ï¼ˆè‡ªå‹•å°ºå¯¸èª¿æ•´ï¼‰
$ ./run4.sh "cht-example/"         # åˆä½µå› PDF

# æˆ–ç›´æ¥èª¿ç”¨ CLI
$ uv run python -m pdf2cht.cli.pdf_to_images "example.pdf"
$ uv run python -m pdf2cht.cli.translate_adaptive "example/"
$ uv run python -m pdf2cht.cli.images_to_pdf "cht-example/"
            </div>
        </div>

        <!-- 3. é©æ‡‰æ€§ç¿»è­¯å…§éƒ¨æµç¨‹ -->
        <div class="diagram-section">
            <h2>âš¡ 3. é©æ‡‰æ€§ç¿»è­¯æ¨¡å¼è©³ç´°æµç¨‹</h2>
            <p>å±•ç¤ºé©æ‡‰æ€§ç¿»è­¯æ¨¡å¼çš„å…§éƒ¨é‚è¼¯å’Œæ±ºç­–é»ï¼ˆæ–°æ¨¡å¼ï¼Œæ¨è–¦ä½¿ç”¨ï¼‰ã€‚</p>

            <div class="mermaid">
                %%{init: {'flowchart': {'htmlLabels': true}}}%%
                graph TD
                    Start["ğŸ–¼ï¸ è®€å–åœ–æª”<br/>page_001.png"]

                    APICheck["âš¡ API æª¢æŸ¥<br/>gemini-2.5-flash-lite"]

                    CheckQuota{"é…é¡<br/>å……è¶³ï¼Ÿ"}

                    Translate["ğŸŒ ç¿»è­¯<br/>gemini-3-pro-image"]

                    TransResult{"ç¿»è­¯<br/>æˆåŠŸï¼Ÿ"}

                    Success["âœ… ä¿å­˜<br/>cht-page_001.png"]

                    Retry1{"é‡è©¦ 1<br/>ï¼Ÿ"}

                    Wait["â±ï¸ ç­‰å¾… 10 ç§’"]

                    Translate2["ğŸŒ é‡è©¦ç¿»è­¯"]

                    Retry2Result{"æˆåŠŸï¼Ÿ"}

                    Retry2{"é‡è©¦ 2<br/>ï¼Ÿ"}

                    Failed["âŒ è¨˜éŒ„å¤±æ•—"]

                    Next["â†“ ä¸‹ä¸€å¼µåœ–æª”<br/>page_002.png"]

                    Monitor["ğŸ“Š å³æ™‚ç›£æ§<br/>RPM/TPM/æˆæœ¬/é€²åº¦"]

                    Start --> APICheck
                    APICheck --> CheckQuota
                    CheckQuota -->|å¦| Failed
                    CheckQuota -->|æ˜¯| Translate
                    Translate --> TransResult
                    TransResult -->|æ˜¯| Success
                    TransResult -->|å¦| Retry1
                    Retry1 -->|æ˜¯| Wait
                    Retry1 -->|å¦| Failed
                    Wait --> Translate2
                    Translate2 --> Retry2Result
                    Retry2Result -->|æ˜¯| Success
                    Retry2Result -->|å¦| Retry2
                    Retry2 -->|æ˜¯| Failed
                    Retry2 -->|å¦| Failed
                    Success --> Monitor
                    Failed --> Monitor
                    Monitor --> Next

                    style Start fill:#e0f2f1,stroke:#333,stroke-width:2px,color:#000
                    style APICheck fill:#fce4ec,stroke:#333,stroke-width:2px,color:#000
                    style Translate fill:#e3f2fd,stroke:#333,stroke-width:2px,color:#000
                    style Success fill:#e8f5e9,stroke:#333,stroke-width:2px,color:#000
                    style Failed fill:#ffebee,stroke:#333,stroke-width:2px,color:#000
                    style Monitor fill:#fff3e0,stroke:#333,stroke-width:2px,color:#000
                    style Next fill:#e0f2f1,stroke:#333,stroke-width:2px,color:#000
            </div>

            <h3>âš™ï¸ åƒæ•¸é…ç½®</h3>
            <div class="code-block">
# ä½¿ç”¨é è¨­åƒæ•¸ï¼ˆæ¨è–¦ï¼‰
$ uv run python -m pdf2cht.cli.translate_adaptive "example/"

# è‡ªè¨‚é‡è©¦é‚è¼¯
$ uv run python -m pdf2cht.cli.translate_adaptive "example/" \
  --retry-count 3 \
  --retry-delay 15

# è‡ªè¨‚ API æ¨¡å‹
$ uv run python -m pdf2cht.cli.translate_adaptive "example/" \
  --api-check-model "gemini-2.5-flash" \
  --translation-model "gemini-3-pro-image-preview"
            </div>
        </div>

        <!-- 4. æç¤ºè©ç‰ˆæœ¬å°æ¯” -->
        <div class="diagram-section">
            <h2>ğŸ¯ 4. æç¤ºè©ç‰ˆæœ¬å°æ¯”</h2>
            <p>å››ç¨®æç¤ºè©ç‰ˆæœ¬çš„ç‰¹æ€§ã€è¤‡é›œåº¦å’Œé©ç”¨å ´æ™¯å°æ¯”ã€‚</p>

            <div class="mermaid">
                %%{init: {'flowchart': {'htmlLabels': true}}}%%
                graph TB
                    Minimal["ğŸ“Œ minimal.txt<br/>ã€è¶…ç°¡ç‰ˆã€‘<br/>â”€â”€â”€â”€â”€<br/>è¡Œæ•¸ï¼š3<br/>è§£æåº¦ï¼šé»˜èª<br/>æ ¼å¼ï¼šç´”æ–‡æœ¬"]

                    Simple["ğŸ“‹ simple.txt<br/>ã€ç°¡åŒ–ç‰ˆã€‘<br/>â”€â”€â”€â”€â”€<br/>è¡Œæ•¸ï¼š12<br/>è§£æåº¦ï¼šé»˜èª<br/>æ ¼å¼ï¼šJSON"]

                    Default["ğŸ“– default.txt<br/>ã€è©³ç´°ç‰ˆã€‘<br/>â”€â”€â”€â”€â”€<br/>è¡Œæ•¸ï¼š80+<br/>è§£æåº¦ï¼š1K<br/>æ ¼å¼ï¼šJSON"]

                    Bilingual["ğŸŒŸ bilingual.txt<br/>ã€æ¨è–¦ç‰ˆã€‘<br/>â”€â”€â”€â”€â”€<br/>è¡Œæ•¸ï¼š100+<br/>è§£æåº¦ï¼š2K<br/>æ ¼å¼ï¼šJSON"]

                    Speed["âš¡ é€Ÿåº¦"]
                    Quality["âœ¨ å“è³ª"]
                    Detail["ğŸ“ ç´°ç¯€"]
                    Cost["ğŸ’° æˆæœ¬"]

                    Minimal --> |"æœ€å¿«"| Speed
                    Simple --> |"å¿«"| Speed
                    Default --> |"ä¸­ç­‰"| Speed
                    Bilingual --> |"æœ€æ…¢"| Speed

                    Minimal --> |"å¯æ¥å—"| Quality
                    Simple --> |"è‰¯å¥½"| Quality
                    Default --> |"é«˜"| Quality
                    Bilingual --> |"æœ€é«˜"| Quality

                    Minimal --> |"åŸºç¤"| Detail
                    Simple --> |"æ¨™æº–"| Detail
                    Default --> |"å®Œæ•´"| Detail
                    Bilingual --> |"è©³ç›¡"| Detail

                    Minimal --> |"æœ€ä½"| Cost
                    Simple --> |"ä½"| Cost
                    Default --> |"ä¸­ç­‰"| Cost
                    Bilingual --> |"ä¸­ç­‰"| Cost

                    style Minimal fill:#e8f5e9,stroke:#333,stroke-width:2px,color:#000
                    style Simple fill:#e3f2fd,stroke:#333,stroke-width:2px,color:#000
                    style Default fill:#fff3e0,stroke:#333,stroke-width:2px,color:#000
                    style Bilingual fill:#ffebee,stroke:#333,stroke-width:2px,color:#000
                    style Speed fill:#e3f2fd,stroke:#333,stroke-width:1px,color:#000
                    style Quality fill:#f3e5f5,stroke:#333,stroke-width:1px,color:#000
                    style Detail fill:#fff3e0,stroke:#333,stroke-width:1px,color:#000
                    style Cost fill:#ffebee,stroke:#333,stroke-width:1px,color:#000
            </div>

            <h3>ğŸ“Š ç‰ˆæœ¬é¸æ“‡æŒ‡å—</h3>
            <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
                <tr style="background: #667eea; color: white;">
                    <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">ç‰ˆæœ¬</th>
                    <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">æ ¼å¼</th>
                    <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">ç‰¹é»</th>
                    <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">é©ç”¨å ´æ™¯</th>
                </tr>
                <tr style="background: #f5f5f5;">
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>minimal.txt</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd;">ç´”æ–‡æœ¬</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">è¶…ç°¡çŸ­èªªæ˜ï¼ˆ3 è¡Œï¼‰</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">å¿«é€Ÿæ¸¬è©¦ã€æˆæœ¬æ•æ„Ÿå ´æ™¯</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>simple.txt</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd;">JSON</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">ç°¡æ½”èªªæ˜ï¼Œä¸­è‹±ä¸¦å­˜</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">ä¸€èˆ¬æ–‡æª”ç¿»è­¯</td>
                </tr>
                <tr style="background: #f5f5f5;">
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>default.txt</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd;">JSON</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">å®Œæ•´èªªæ˜ï¼ŒåŒ…å« Plan-first é‚è¼¯</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">é«˜å“è³ªè¦æ±‚ã€è¤‡é›œæ’ç‰ˆ</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>bilingual.txt</strong> ğŸŒŸ</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">JSON</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">å¼·èª¿ä¸­è‹±ä¸¦å­˜ã€Visual Anchoringã€2K è§£æåº¦</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">è³‡å®‰æ–‡æª”ã€æŠ€è¡“è³‡æ–™ï¼ˆæ¨è–¦ï¼‰</td>
                </tr>
            </table>

            <h3>ğŸ”§ æç¤ºè©åƒæ•¸</h3>
            <div class="code-block">
# æŒ‡å®šæç¤ºè©ç‰ˆæœ¬ï¼ˆåœ¨ä»£ç¢¼ä¸­ï¼‰
from pdf2cht.core.prompt_manager import PromptManager

pm = PromptManager()

# è¼‰å…¥ä¸åŒç‰ˆæœ¬çš„æç¤ºè©
bilingual_prompt = pm.load_prompt("bilingual")      # æ¨è–¦ç‰ˆï¼ˆ2K, ä¸­è‹±ä¸¦å­˜ï¼‰
default_prompt = pm.load_prompt("default")          # è©³ç´°ç‰ˆï¼ˆ1Kï¼‰
simple_prompt = pm.load_prompt("simple")            # ç°¡åŒ–ç‰ˆ
minimal_prompt = pm.load_prompt("minimal")          # è¶…ç°¡ç‰ˆ

# é©—è­‰æç¤ºè©è¨­ç½®
checks = pm.validate_prompt(bilingual_prompt)
# checks = {
#     "inherits_dimensions": True,      # ç¹¼æ‰¿åŸåœ–å°ºå¯¸
#     "layout_preservation": True,       # åªæ›å­—
#     "negative_prompts": True,          # åå‘æç¤ºè©
#     "no_fixed_aspect": True            # ç„¡å›ºå®šé•·å¯¬æ¯”
# }
            </div>
        </div>

        <!-- 5. è¨ºæ–·ç³»çµ±æ¶æ§‹ -->
        <div class="diagram-section">
            <h2>ğŸ” 5. è¨ºæ–·ç³»çµ±æ¶æ§‹</h2>
            <p>è‡ªå‹•åŒ–è¨ºæ–·å·¥å…·çš„æª¢æŸ¥é …ç›®å’Œä¿®å¾©å»ºè­°æµç¨‹ã€‚</p>

            <div class="mermaid">
                %%{init: {'flowchart': {'htmlLabels': true}}}%%
                graph LR
                    Start["ğŸ¥ åŸ·è¡Œè¨ºæ–·"]

                    Env["ğŸŒ ç’°å¢ƒæª¢æŸ¥<br/>â€¢ Python ç‰ˆæœ¬<br/>â€¢ uv å¥—ä»¶ç®¡ç†<br/>â€¢ ç£ç¢Ÿç©ºé–“"]

                    API["ğŸ”‘ API æª¢æŸ¥<br/>â€¢ Key æ ¼å¼é©—è­‰<br/>â€¢ å¯¦éš›é€£æ¥æ¸¬è©¦<br/>â€¢ é…é¡ç‹€æ…‹"]

                    Network["ğŸŒ ç¶²è·¯æª¢æŸ¥<br/>â€¢ DNS è§£æ<br/>â€¢ API é€£é€šæ€§<br/>â€¢ é€¾æ™‚æ¸¬è©¦"]

                    Usage["ğŸ“Š ç”¨é‡åˆ†æ<br/>â€¢ SQLite çµ±è¨ˆ<br/>â€¢ æˆåŠŸç‡åˆ†æ<br/>â€¢ æˆæœ¬ä¼°ç®—"]

                    ErrorLog["âš ï¸ éŒ¯èª¤åˆ†æ<br/>â€¢ æ—¥èªŒè§£æ<br/>â€¢ éŒ¯èª¤åˆ†é¡<br/>â€¢ æ¨¡å¼è­˜åˆ¥"]

                    Report["ğŸ“‹ è¨ºæ–·å ±å‘Š<br/>âœ… é€šéé …<br/>âŒ å¤±æ•—é …<br/>ğŸ’¡ å»ºè­°"]

                    Start --> Env
                    Start --> API
                    Start --> Network
                    Start --> Usage
                    Start --> ErrorLog

                    Env --> Report
                    API --> Report
                    Network --> Report
                    Usage --> Report
                    ErrorLog --> Report

                    style Start fill:#e3f2fd,stroke:#333,stroke-width:2px,color:#000
                    style Env fill:#e0f2f1,stroke:#333,stroke-width:2px,color:#000
                    style API fill:#fce4ec,stroke:#333,stroke-width:2px,color:#000
                    style Network fill:#e0f2f1,stroke:#333,stroke-width:2px,color:#000
                    style Usage fill:#f3e5f5,stroke:#333,stroke-width:2px,color:#000
                    style ErrorLog fill:#ffe0e0,stroke:#333,stroke-width:2px,color:#000
                    style Report fill:#e8f5e9,stroke:#333,stroke-width:2px,color:#000
            </div>

            <h3>ğŸ¯ ä½¿ç”¨è¨ºæ–·å·¥å…·</h3>
            <div class="code-block">
# å®Œæ•´è¨ºæ–·
$ uv run python -m pdf2cht.cli.diagnose

# åªæª¢æŸ¥ API
$ uv run python -m pdf2cht.cli.diagnose --check-api

# åˆ†æç”¨é‡è³‡æ–™åº«
$ uv run python -m pdf2cht.cli.diagnose --check-usage "example/usage.db"

# åˆ†æéŒ¯èª¤æ—¥èªŒ
$ uv run python -m pdf2cht.cli.diagnose --analyze-errors "error_details.log"

# è¼¸å‡ºç¯„ä¾‹ï¼š
# âœ… ç’°å¢ƒé…ç½®ï¼šPython ç‰ˆæœ¬ âœ“ | ä¾è³´ âœ“ | ç£ç¢Ÿç©ºé–“ âœ“
# âœ… API é…ç½®ï¼šAPI Key æ ¼å¼ âœ“ | é€£æ¥æ¸¬è©¦ âœ“ | é…é¡ç‹€æ…‹ âœ“
# âœ… ç¶²è·¯é€£æ¥ï¼šDNS âœ“ | API å¯é” âœ“
# ğŸ“Š ç”¨é‡çµ±è¨ˆï¼š57 å¼µåœ–ç‰‡å·²ç¿»è­¯ï¼ŒæˆåŠŸç‡ 98.2%ï¼Œä¼°ç®—æˆæœ¬ $0.85
            </div>
        </div>

        <!-- 6. é©æ‡‰æ€§ç¿»è­¯æ€§èƒ½æŒ‡æ¨™ -->
        <div class="diagram-section">
            <h2>ğŸ’° 6. é©æ‡‰æ€§ç¿»è­¯æ€§èƒ½æŒ‡æ¨™</h2>
            <p>é©æ‡‰æ€§ç¿»è­¯æ¨¡å¼çš„å¯¦éš›æˆæœ¬ã€é€Ÿåº¦å’ŒæˆåŠŸç‡ï¼ˆåŸºæ–¼ 57 å¼µ OWASP åœ–ç‰‡ï¼‰ã€‚</p>

            <div class="mermaid">
                %%{init: {'flowchart': {'htmlLabels': true}}}%%
                graph LR
                    Adaptive["ğŸŒŸ é©æ‡‰æ€§ç¿»è­¯<br/>â”€â”€â”€â”€â”€<br/>57 å¼µåœ–ç‰‡"]

                    Cost["ğŸ’° æˆæœ¬<br/>$0.85<br/>â€¢ ç¿»è­¯ï¼š$0.75<br/>â€¢ APIæª¢æŸ¥ï¼š$0.10"]

                    Speed["âš¡ é€Ÿåº¦<br/>8 åˆ†é˜<br/>â€¢ æ¯å¼µï¼š7ç§’<br/>â€¢ å³æ™‚åé¥‹"]

                    Success["âœ… æˆåŠŸç‡<br/>98.2%<br/>â€¢ æˆåŠŸï¼š56/57<br/>â€¢ è‡ªå‹•é‡è©¦"]

                    Adaptive --> Cost
                    Adaptive --> Speed
                    Adaptive --> Success

                    style Adaptive fill:#e8f5e9,stroke:#333,stroke-width:2px,color:#000
                    style Cost fill:#e8f5e9,stroke:#333,stroke-width:1px,color:#000
                    style Speed fill:#e8f5e9,stroke:#333,stroke-width:1px,color:#000
                    style Success fill:#e8f5e9,stroke:#333,stroke-width:1px,color:#000
            </div>

            <h3>ğŸ“ˆ æ€§èƒ½æ•¸æ“š</h3>
            <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
                <tr style="background: #667eea; color: white;">
                    <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">æŒ‡æ¨™</th>
                    <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">é©æ‡‰æ€§ç¿»è­¯</th>
                </tr>
                <tr style="background: #f5f5f5;">
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>æˆæœ¬ï¼ˆ57 å¼µï¼‰</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd;">$0.85</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>åŸ·è¡Œæ™‚é–“</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd;">8 åˆ†é˜</td>
                </tr>
                <tr style="background: #f5f5f5;">
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>æˆåŠŸç‡</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd;">98.2%</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>äººå·¥å¹²é </strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd;">ç„¡ï¼ˆ100% è‡ªå‹•åŒ–ï¼‰</td>
                </tr>
                <tr style="background: #f5f5f5;">
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>å³æ™‚åé¥‹</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd;">âœ… æ¯å¼µå³æ™‚</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>å°ºå¯¸ç²¾åº¦</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd;">100% ç²¾ç¢ºåŒ¹é…ï¼ˆQA è‡ªå‹•ä¿®æ­£ï¼‰</td>
                </tr>
            </table>
        </div>

        <!-- 7. å°ºå¯¸ç²¾ç¢ºåŒ¹é…æ©Ÿåˆ¶ (æ–°å¢) -->
        <div class="diagram-section">
            <h2>ğŸ“ 7. å°ºå¯¸ç²¾ç¢ºåŒ¹é… - ä¸‰å±¤é˜²ç¦¦æ©Ÿåˆ¶ ğŸ†•ï¼ˆv2.1.0 æ–°å¢ï¼‰</h2>
            <p>è‡ªå‹•è¨ˆç®—åŸåœ–å¯¬é«˜æ¯”ã€æç¤ºè©å‹•æ…‹æ³¨å…¥ã€QA è‡ªå‹•ä¿®æ­£ â†’ 100% ä¿è­‰å°ºå¯¸ä¸€è‡´</p>

            <div class="mermaid">
                %%{init: {'flowchart': {'htmlLabels': true}}}%%
                graph TD
                    Original["ğŸ“¸ åŸåœ–<br/>1920Ã—2485<br/>å¯¬é«˜æ¯”ï¼š384:497"]

                    CalcAspect["ğŸ”¢ å±¤ 1ï¼šè¨ˆç®—å¯¬é«˜æ¯”<br/>translator.py"]

                    CalcResult["âœ… å¯¬é«˜æ¯”è¨ˆç®—å®Œæˆ<br/>aspect_ratio = '384:497'<br/>target_width = '1920'<br/>target_height = '2485'"]

                    InjectPrompt["ğŸ’¬ å±¤ 2ï¼šæ³¨å…¥æç¤ºè©<br/>prompt_manager.py"]

                    PromptReady["âœ… æç¤ºè©å¼·åŒ–<br/>'AspectRatio': '384:497'<br/>'TargetDimensions': '1920Ã—2485'<br/>...è¼¸å‡ºåœ–ç‰‡å¿…é ˆä¿æŒå¯¬é«˜æ¯”..."]

                    Translate["ğŸŒ Gemini ç¿»è­¯<br/>gemini-3-pro-image"]

                    TransOutput["ğŸ“Š ç¿»è­¯è¼¸å‡º<br/>1824Ã—2336ï¼ˆ-5% å¯¬ï¼Œ-6% é«˜ï¼‰"]

                    QACheck["âœ… å±¤ 3ï¼šQA è‡ªå‹•ä¿®æ­£<br/>qa_validator.py"]

                    QADetect{"å°ºå¯¸æ˜¯å¦<br/>åŒ¹é…ï¼Ÿ"}

                    Resize["ğŸ”§ LANCZOS é‡æ¡æ¨£<br/>èª¿æ•´åˆ° 1920Ã—2485"]

                    Final["âœ… æœ€çµ‚è¼¸å‡º<br/>1920Ã—2485<br/>100% ç²¾ç¢ºåŒ¹é…"]

                    Original --> CalcAspect
                    CalcAspect --> CalcResult
                    CalcResult --> InjectPrompt
                    InjectPrompt --> PromptReady
                    PromptReady --> Translate
                    Translate --> TransOutput
                    TransOutput --> QACheck
                    QACheck --> QADetect
                    QADetect -->|ä¸åŒ¹é…| Resize
                    QADetect -->|åŒ¹é…| Final
                    Resize --> Final

                    style Original fill:#e0f2f1,stroke:#333,stroke-width:2px,color:#000
                    style CalcAspect fill:#e3f2fd,stroke:#333,stroke-width:2px,color:#000
                    style CalcResult fill:#f3e5f5,stroke:#333,stroke-width:2px,color:#000
                    style InjectPrompt fill:#e3f2fd,stroke:#333,stroke-width:2px,color:#000
                    style PromptReady fill:#f3e5f5,stroke:#333,stroke-width:2px,color:#000
                    style Translate fill:#fce4ec,stroke:#333,stroke-width:2px,color:#000
                    style TransOutput fill:#fff3e0,stroke:#333,stroke-width:2px,color:#000
                    style QACheck fill:#e3f2fd,stroke:#333,stroke-width:2px,color:#000
                    style QADetect fill:#fce4ec,stroke:#333,stroke-width:2px,color:#000
                    style Resize fill:#fff3e0,stroke:#333,stroke-width:2px,color:#000
                    style Final fill:#e8f5e9,stroke:#333,stroke-width:2px,color:#000
            </div>

            <h3>ğŸ” ä¸‰å±¤é˜²ç¦¦èªªæ˜</h3>
            <div class="legend">
                <div class="legend-item">
                    <strong style="color: #667eea;">å±¤ 1ï¼šå¯¬é«˜æ¯”è¨ˆç®—</strong><br/>
                    è‡ªå‹•è®€å–åŸåœ–å°ºå¯¸ï¼Œè¨ˆç®—æœ€ç°¡åˆ†æ•¸ï¼ˆ1920Ã—2485 â†’ 384:497ï¼‰
                </div>
                <div class="legend-item">
                    <strong style="color: #764ba2;">å±¤ 2ï¼šæç¤ºè©æ³¨å…¥</strong><br/>
                    å‹•æ…‹æ³¨å…¥ aspect_ratio å’Œç›®æ¨™å°ºå¯¸åˆ° JSON æç¤ºè©ï¼Œå¼·åŒ– AI å°å°ºå¯¸çš„ç†è§£
                </div>
                <div class="legend-item">
                    <strong style="color: #f093fb;">å±¤ 3ï¼šQA è‡ªå‹•ä¿®æ­£</strong><br/>
                    ç¿»è­¯å®Œæˆå¾Œè‡ªå‹•æª¢æ¸¬ï¼Œè‹¥ä¸åŒ¹é…å‰‡ç”¨ LANCZOS é‡æ¡æ¨£èª¿æ•´ â†’ **100% ä¿è­‰ç²¾ç¢º**
                </div>
            </div>

            <h3>ğŸ“Š å°ºå¯¸ç²¾åº¦å°æ¯”</h3>
            <table style="width: 100%; border-collapse: collapse; margin-top: 15px;">
                <tr style="background: #f5f5f5;">
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>é …ç›®</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>v2.0.0 åŠä»¥å‰</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>v2.1.0ï¼ˆæ–°ç‰ˆï¼‰</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>æ”¹é€²</strong></td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>åŸåœ–å°ºå¯¸</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd;">1920Ã—2485</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">1920Ã—2485</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">âœ… åŒæ­¥</td>
                </tr>
                <tr style="background: #f5f5f5;">
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>Gemini ç›´æ¥è¼¸å‡º</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd;">1824Ã—2336ï¼ˆ-5%, -6%ï¼‰</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">1824Ã—2336ï¼ˆ-5%, -6%ï¼‰</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">ğŸ“‹ è¨˜éŒ„å®Œæ•´</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>æç¤ºè©æ³¨å…¥å¾Œ</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd;">ç„¡ï¼ˆæœªå¯¦ç¾ï¼‰</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">é æœŸ Â±2% æ”¹å–„</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">â¬†ï¸ å¾æºé ­å¼•å°</td>
                </tr>
                <tr style="background: #f5f5f5;">
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>QA è‡ªå‹•ä¿®æ­£å¾Œ</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd;">ç„¡ï¼ˆåƒ…è¨˜éŒ„ä¸ä¿®æ­£ï¼‰</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">1920Ã—2485ï¼ˆ100% ç²¾ç¢ºï¼‰</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">âœ… **å®Œå…¨ä¿è­‰**</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>æœ€çµ‚ PDF é é¢è¦æ ¼</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd;">èˆ‡åŸå§‹ PDF ä¸ä¸€è‡´</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">èˆ‡åŸå§‹ PDF å®Œå…¨ç›¸åŒ</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">âœ… **100% åŒ¹é…**</td>
                </tr>
            </table>

            <h3>ğŸš€ é‹ä½œæµç¨‹</h3>
            <div class="code-block">
# å®Œæ•´æµç¨‹ï¼ˆè‡ªå‹•é‹ä½œï¼Œç„¡éœ€æ‰‹å‹•å¹²é ï¼‰

1ï¸âƒ£ run2.sh "document.pdf"
   â””â”€ PDF â†’ åœ–æª”ï¼ŒåŒæ™‚è‡ªå‹•è¨˜éŒ„æ¯å¼µåŸåœ–å°ºå¯¸

2ï¸âƒ£ run3.sh "document/"
   â”œâ”€ å±¤ 1ï¼šè¨ˆç®—æ¯å¼µçš„å¯¬é«˜æ¯”ï¼ˆå¦‚ 384:497ï¼‰
   â”œâ”€ å±¤ 2ï¼šæ³¨å…¥åˆ° bilingual.txt æç¤ºè©ä¸­
   â”œâ”€ å±¤ 3ï¼šGemini ç¿»è­¯
   â””â”€ å±¤ 4ï¼šQA è‡ªå‹•æª¢æ¸¬ä¸¦ä¿®æ­£å°ºå¯¸ âœ…

3ï¸âƒ£ run4.sh "cht-document/"
   â””â”€ åˆä½µå› PDFï¼Œæ¯é è¦æ ¼ = åŸåœ–è¦æ ¼ âœ…
            </div>
        </div>

        <footer>
            <p>ğŸ“ PDF2CHT v2.1.0 - æ¶æ§‹èˆ‡æµç¨‹å¯è¦–åŒ–ï¼ˆæ–°å¢å°ºå¯¸ç²¾ç¢ºåŒ¹é…ï¼‰</p>
            <p>æ›´æ–°æ™‚é–“ï¼š2026-01-26 | æŸ¥çœ‹å®Œæ•´æ–‡æª”ï¼š<a href="README.md" style="color: #fff; text-decoration: underline;">README.md</a></p>
        </footer>
    </div>
</body>
</html>
